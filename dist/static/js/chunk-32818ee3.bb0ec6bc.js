(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32818ee3"],{2237:function(e,t,n){"use strict";var r=n("46a7"),i=n("4162"),a=n("d2cf"),o=n("4488"),s=n("7f99"),c=n("d2b9"),u=RangeError,l=String,f=Math.floor,h=i(s),d=i("".slice),m=i(1..toFixed),v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},g=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},p=function(e,t,n){var r=-1,i=n;while(++r<6)i+=t*e[r],e[r]=i%1e7,i=f(i/1e7)},C=function(e,t){var n=6,r=0;while(--n>=0)r+=e[n],e[n]=f(r/t),r=r%t*1e7},w=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var r=l(e[t]);n=""===n?r:n+h("0",7-r.length)+r}return n},y=c((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!c((function(){m({})}));r({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,n,r,i,s=o(this),c=a(e),f=[0,0,0,0,0,0],m="",y="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(m="-",s=-s),s>1e-21)if(t=g(s*v(2,69,1))-69,n=t<0?s*v(2,-t,1):s/v(2,t,1),n*=4503599627370496,t=52-t,t>0){p(f,0,n),r=c;while(r>=7)p(f,1e7,0),r-=7;p(f,v(10,r,1),0),r=t-1;while(r>=23)C(f,1<<23),r-=23;C(f,1<<r),p(f,1,1),C(f,2),y=w(f)}else p(f,0,n),p(f,1<<-t,0),y=w(f)+h("0",c);return c>0?(i=y.length,y=m+(i<=c?"0."+h("0",c-i)+y:d(y,0,i-c)+"."+d(y,i-c))):y=m+y,y}})},"35aa":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"cesiumContainer"}})])}],a=(n("5f01"),n("ee5c"),n("9e48")),o=n("e9d3"),s=[{codeLanguage:"VUE",relyOn:[{label:"Entity.js",url:"cesium/Entity.js"},{label:"Transform.js",url:"cesium/Transform.js"}],code:[{codeLanguage:"html",content:'<template>\n                            <div class="container">\n                                <div id="cesiumContainer"></div>\n                            </div>\n                    </template>'},{codeLanguage:"js",content:'\n                import Entity from "@/common/cesium/Entity.js";\n                import Transform from "@/common/cesium/Transform.js";\n                export default {\n                  name: "GetCoordinates",\n                  data() {\n                    return {\n                      viewer: null,\n                      _Entity: null,\n                      _Transform: null,\n                      handler: null,\n                    };\n                  },\n                  mounted() {\n                    this.init();\n                  },\n                  methods: {\n                    init() {\n                      const Cesium = this.cesium;\n                      this.viewer = new Cesium.Viewer("cesiumContainer", {\n                        imageryProvider: new Cesium.ArcGisMapServerImageryProvider({\n                          url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",\n                        }),\n                        terrainProvider: new Cesium.CesiumTerrainProvider({\n                          //加载火星在线地形\n                          url: "http://data.marsgis.cn/terrain",\n                        }),\n                        shouldAnimate: true,\n                        infoBox: false,\n                        selectionIndicator: false,\n                      });\n                      //设置贴地效果\n                      this.viewer.scene.globe.depthTestAgainstTerrain = false;\n                      this._Entity = new Entity(Cesium, this.viewer);\n                      this._Transform = new Transform(Cesium, this.viewer);\n                      this.handler = new Cesium.ScreenSpaceEventHandler(\n                        this.viewer.scene.canvas\n                      );\n                      this.start();\n                    },\n                    /**\n                     * 开始\n                     */\n                    start() {\n                      const Cesium = this.cesium;\n                      this.handler.setInputAction((event) => {\n                        // 添加点\n                        this._Entity.createPoint({\n                          position: this.viewer.scene.camera.pickEllipsoid(event.position),\n                          color: Cesium.Color.RED,\n                          pixelSize: 30,\n                        });\n                        // 获取点击位置\n                        const getPosition = this._Transform.getPosition(event);\n                        const getPositionAll = JSON.stringify(getPosition);\n                        const longitude = getPosition.longitude;\n                        const latitude = getPosition.latitude;\n                        const cameraHeight = getPosition.cameraHeight;\n                        const Alert =\n                          getPositionAll +\n                          "\n经度：" +\n                          longitude +\n                          "、纬度：" +\n                          latitude +\n                          "、相机高度：" +\n                          cameraHeight;\n                        console.log(Alert);\n                        alert(Alert);\n                      }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n                    },\n                  },\n                };\n                '},{codeLanguage:"css",content:" .container {\n                            width: 100%;\n                            height: 100%;\n                            #cesiumContainer {\n                                width: 100%;\n                                height: 100%;\n                            }\n                        }\n                            "}]}],c={name:"GetCoordinates",data:function(){return{viewer:null,_Entity:null,_Transform:null,handler:null}},created:function(){this.$store.dispatch("highlight/set_code",s)},mounted:function(){this.init()},methods:{init:function(){var e=this.cesium;e.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNTIzZTZiYi05OWQxLTQ0OTUtYTUzNC1mYjYxNWI4OTZiZTYiLCJpZCI6OTA3MDUsImlhdCI6MTY1MDUzNDAzMn0.0f1DG8NlExZnbrueMn_AgO6GX_g_RASavpxAWcVymPs",this.viewer=new e.Viewer("cesiumContainer",{imageryProvider:new e.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),terrainProvider:new e.CesiumTerrainProvider({url:"http://data.marsgis.cn/terrain"}),shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.scene.globe.depthTestAgainstTerrain=!1,this._Entity=new a["a"](e,this.viewer),this._Transform=new o["a"](e,this.viewer),this.handler=new e.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.start(),this.viewer.camera.flyTo({destination:e.Cartesian3.fromDegrees(123.43382736814452,41.811201240193164,3e3),orientation:{heading:e.Math.toRadians(0),pitch:e.Math.toRadians(-90),roll:0},duration:3})},start:function(){var e=this,t=this.cesium;this.handler.setInputAction((function(n){e._Entity.createPoint({position:e.viewer.scene.camera.pickEllipsoid(n.position),color:t.Color.RED,pixelSize:30});var r=e._Transform.getPosition(n),i="".concat(JSON.stringify(r),"\n经度：").concat(r.longitude,"、纬度：").concat(r.latitude,"、相机高度：").concat(r.cameraHeight);console.log(i),e.$copyText("".concat(r.longitude,",").concat(r.latitude)).then((function(t){e.$notify({title:"成功",message:"位置信息已拷贝到粘贴板",type:"success"})}),(function(t){e.$notify.error({title:"错误",message:"位置信息拷贝失败"})}))}),t.ScreenSpaceEventType.LEFT_CLICK)}}},u=c,l=(n("622b"),n("cba8")),f=Object(l["a"])(u,r,i,!1,null,"4038920e",null);t["default"]=f.exports},"3f6a":function(e,t,n){},4488:function(e,t,n){var r=n("4162");e.exports=r(1..valueOf)},"4bb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a567");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"622b":function(e,t,n){"use strict";n("3f6a")},7502:function(e,t,n){"use strict";var r=n("5fa3"),i=n("eaa4"),a=n("4162"),o=n("d12a"),s=n("05b4"),c=n("a220"),u=n("555a"),l=n("736f"),f=n("7d68"),h=n("d957"),d=n("d2b9"),m=n("d0a3").f,v=n("6311").f,g=n("c4d4").f,p=n("4488"),C=n("942b").trim,w="Number",y=i[w],b=y.prototype,I=i.TypeError,E=a("".slice),T=a("".charCodeAt),P=function(e){var t=h(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,n,r,i,a,o,s,c,u=h(e,"number");if(f(u))throw I("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=C(u),t=T(u,0),43===t||45===t){if(n=T(u,2),88===n||120===n)return NaN}else if(48===t){switch(T(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=E(u,2),o=a.length,s=0;s<o;s++)if(c=T(a,s),c<48||c>i)return NaN;return parseInt(a,r)}return+u};if(o(w,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var M,_=function(e){var t=arguments.length<1?0:y(P(e)),n=this;return l(b,n)&&d((function(){p(n)}))?u(Object(t),n,_):t},A=r?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),N=0;A.length>N;N++)c(y,M=A[N])&&!c(_,M)&&g(_,M,v(y,M));_.prototype=b,b.constructor=_,s(i,w,_,{constructor:!0})}},"78be":function(e,t,n){var r=n("46a7"),i=n("bc35"),a=n("5386");r({target:"Array",proto:!0},{fill:i}),a("fill")},bc35:function(e,t,n){"use strict";var r=n("735b"),i=n("32da"),a=n("1c60");e.exports=function(e){var t=r(this),n=a(t),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);while(u>s)t[s++]=e;return t}},e143:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return i}))},e9d3:function(e,t,n){"use strict";var r=n("4bb1"),i=n("e143"),a=(n("7502"),n("2237"),n("eb3b"),n("a567"),n("f8c7"),n("e226"),n("5f01"),n("5f07"),n("b1f6"),n("5e94"),n("62db"),function(){function e(t,n){Object(r["a"])(this,e),this.Cesium=t,this.viewer=n}return Object(i["a"])(e,[{key:"formCssColorString",value:function(e){var t=this.Cesium;return t.Color.fromCssColorString(e)}},{key:"getPosition",value:function(e){var t=this.Cesium,n=this.viewer,r=n.scene.camera.pickEllipsoid(e.position),i=t.Cartographic.fromCartesian(r),a=t.Math.toDegrees(i.longitude),o=t.Math.toDegrees(i.latitude),s=Number(n.camera.positionCartographic.height.toFixed(0));return{longitude:a,latitude:o,cameraHeight:s}}},{key:"terrainProviderHeight",value:function(e){var t=this.Cesium,n=t.createWorldTerrain(),r=t.sampleTerrainMostDetailed(n,e);return Promise.resolve(r)}},{key:"getSeibelCurve",value:function(e,t,n,r){var i=this.Cesium,a=[],o=i.Cartographic.fromCartesian(e),s=i.Cartographic.fromCartesian(t),c=180*o.longitude/Math.PI,u=180*o.latitude/Math.PI,l=180*s.longitude/Math.PI,f=180*s.latitude/Math.PI,h=Math.sqrt((c-l)*(c-l)+(u-f)*(u-f)),d=h*n,m=i.Cartesian3.clone(e),v=i.Cartesian3.clone(t),g=i.Cartesian3.distance(m,i.Cartesian3.ZERO),p=i.Cartesian3.distance(v,i.Cartesian3.ZERO);if(i.Cartesian3.normalize(m,m),i.Cartesian3.normalize(v,v),0===i.Cartesian3.distance(m,v))return a;var C=i.Cartesian3.angleBetween(m,v);a.push(e);for(var w=1;w<r-1;w++){var y=1*w/(r-1),b=1-y,I=Math.sin(b*C)/Math.sin(C),E=Math.sin(y*C)/Math.sin(C),T=i.Cartesian3.multiplyByScalar(m,I,new i.Cartesian3),P=i.Cartesian3.multiplyByScalar(v,E,new i.Cartesian3),S=i.Cartesian3.add(T,P,new i.Cartesian3),M=y*Math.PI,_=g*b+p*y+Math.sin(M)*d,A=i.Cartesian3.multiplyByScalar(S,_,S);a.push(A)}return a.push(t),a}},{key:"getCatesian3FromPX",value:function(e){var t=this.viewer.camera.getPickRay(e);return t?this.viewer.scene.globe.pick(t,this.viewer.scene):null}},{key:"meter2Lat",value:function(e){var t=Math.PI,n=12742*t/360;return e/n/1e3}},{key:"meter2Lng",value:function(e,t){var n=Math.PI,r=6371*Math.cos(t*n/180)*2*n/360;return e/r/1e3}},{key:"isDegreesOrCartesian",value:function(e){if(!e)throw new Error("Error in Parameter!");return"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.z||"number"===typeof e.lng&&"number"===typeof e.lat}},{key:"toDegrees",value:function(e){var t=this.Cesium;if(this.isDegreesOrCartesian(e)){var n=function(e){var n=new t.Cartesian3(e.x,e.y,e.z),r=t.Cartographic.fromCartesian(n);return{lng:parseFloat(t.Math.toDegrees(r.longitude).toFixed(8)),lat:parseFloat(t.Math.toDegrees(r.latitude).toFixed(8)),alt:parseFloat(r.height.toFixed(8))}};return e.x&&(e=n(e)),e}}},{key:"toCartesian",value:function(e){var t=this.Cesium;if(this.isDegreesOrCartesian(e)){var n=function(e){return t.Cartesian3.fromDegrees(e.lng,e.lat,e.alt||0)};return e.lng&&(e=n(e)),e}}},{key:"toWindowCoordinates",value:function(e){var t=this.Cesium,n=this.viewer;if(n&&e&&e.x&&e.y&&e.z)return t.SceneTransforms.wgs84ToWindowCoordinates(n.scene,e);if(n&&e.lng&&e.lat&&e.alt)return t.SceneTransforms.wgs84ToWindowCoordinates(n.scene,toCartesianFromDegrees(e));throw new Error("Error in Parameter!")}},{key:"colorRgb",value:function(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,n=e.toLowerCase();if(t.test(n)){if(4===n.length){for(var r="#",i=1;i<4;i+=1)r+=n.slice(i,i+1).concat(n.slice(i,i+1));n=r}for(var a=[],o=1;o<7;o+=2)a.push(parseInt("0x"+n.slice(o,o+2)));return a}return[]}},{key:"colorRgbString",value:function(e){var t=this.colorRgb(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}},{key:"colorRgb1",value:function(e){var t=this.colorRgb(e);return t.forEach((function(e,n){t[n]=(e/255).toFixed(2)})),t}},{key:"colorRGB2Hex",value:function(e){var t=e.split(",");if(t.length<=1)return e;var n=parseInt(t[0].split("(")[1]),r=parseInt(t[1]),i=parseInt(t[2].split(")")[0]),a="#"+((1<<24)+(n<<16)+(r<<8)+i).toString(16).slice(1);return a}}]),e}());t["a"]=a}}]);