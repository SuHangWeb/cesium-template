(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae6dca18"],{"19bc":function(e,t,r){var i=r("46a7"),a=r("d2b9"),n=r("e136").f,o=a((function(){return!Object.getOwnPropertyNames(1)}));i({target:"Object",stat:!0,forced:o},{getOwnPropertyNames:n})},2237:function(e,t,r){"use strict";var i=r("46a7"),a=r("4162"),n=r("d2cf"),o=r("4488"),s=r("7f99"),c=r("d2b9"),l=RangeError,u=String,d=Math.floor,h=a(s),p=a("".slice),f=a(1..toFixed),m=function(e,t,r){return 0===t?r:t%2===1?m(e,t-1,r*e):m(e*e,t/2,r)},v=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},g=function(e,t,r){var i=-1,a=r;while(++i<6)a+=t*e[i],e[i]=a%1e7,a=d(a/1e7)},C=function(e,t){var r=6,i=0;while(--r>=0)i+=e[r],e[r]=d(i/t),i=i%t*1e7},y=function(e){var t=6,r="";while(--t>=0)if(""!==r||0===t||0!==e[t]){var i=u(e[t]);r=""===r?i:r+h("0",7-i.length)+i}return r},w=c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,r,i,a,s=o(this),c=n(e),d=[0,0,0,0,0,0],f="",w="0";if(c<0||c>20)throw l("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return u(s);if(s<0&&(f="-",s=-s),s>1e-21)if(t=v(s*m(2,69,1))-69,r=t<0?s*m(2,-t,1):s/m(2,t,1),r*=4503599627370496,t=52-t,t>0){g(d,0,r),i=c;while(i>=7)g(d,1e7,0),i-=7;g(d,m(10,i,1),0),i=t-1;while(i>=23)C(d,1<<23),i-=23;C(d,1<<i),g(d,1,1),C(d,2),w=y(d)}else g(d,0,r),g(d,1<<-t,0),w=y(d)+h("0",c);return c>0?(a=w.length,w=f+(a<=c?"0."+h("0",c-a)+w:p(w,0,a-c)+"."+p(w,a-c))):w=f+w,w}})},"3e9f":function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=(r("eb3b"),r("b1f6"),function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r,this.lastStageList=[]}return Object(a["a"])(e,[{key:"add",value:function(e,t,r,i){this.lastStageList.push(this.showRadarScan(e,t,r,i))}},{key:"clear",value:function(){var e=this;this.lastStageList.forEach((function(t){e.clearScanEffects(t)})),this.lastStageList=[]}},{key:"showRadarScan",value:function(e,t,r,i){var a=this.Cesium,n=new a.Cartographic(a.Math.toRadians(e[0]),a.Math.toRadians(e[1]),e[2]);t=new a.Color.fromCssColorString(t);var o=this._addRadarScanPostStage(n,r,t,i);return o}},{key:"_addRadarScanPostStage",value:function(e,t,r,i){var a=this.Cesium,n=a.Cartographic.toCartesian(e),o=new a.Cartesian4(n.x,n.y,n.z,1),s=new a.Cartographic(e.longitude,e.latitude,e.height+500),c=a.Cartographic.toCartesian(s),l=new a.Cartesian4(c.x,c.y,c.z,1),u=new a.Cartographic(e.longitude+a.Math.toRadians(.001),e.latitude,e.height),d=a.Cartographic.toCartesian(u),h=new a.Cartesian4(d.x,d.y,d.z,1),p=new a.Quaternion,f=new a.Matrix3,m=(new Date).getTime(),v=new a.Cartesian4,g=new a.Cartesian4,C=new a.Cartesian4,y=new a.Cartesian3,w=new a.Cartesian3,b=this,_=new a.PostProcessStage({fragmentShader:this._getRadarScanShader(),uniforms:{u_scanCenterEC:function(){return a.Matrix4.multiplyByVector(b.viewer.camera._viewMatrix,o,v)},u_scanPlaneNormalEC:function(){var e=a.Matrix4.multiplyByVector(b.viewer.camera._viewMatrix,o,v),t=a.Matrix4.multiplyByVector(b.viewer.camera._viewMatrix,l,g);return y.x=t.x-e.x,y.y=t.y-e.y,y.z=t.z-e.z,a.Cartesian3.normalize(y,y),y},u_radius:t,u_scanLineNormalEC:function(){var e=a.Matrix4.multiplyByVector(b.viewer.camera._viewMatrix,o,v),t=a.Matrix4.multiplyByVector(b.viewer.camera._viewMatrix,l,g),r=a.Matrix4.multiplyByVector(b.viewer.camera._viewMatrix,h,C);y.x=t.x-e.x,y.y=t.y-e.y,y.z=t.z-e.z,a.Cartesian3.normalize(y,y),w.x=r.x-e.x,w.y=r.y-e.y,w.z=r.z-e.z;var n=((new Date).getTime()-m)%i/i;return a.Quaternion.fromAxisAngle(y,n*a.Math.PI*2,p),a.Matrix3.fromQuaternion(p,f),a.Matrix3.multiplyByVector(f,w,w),a.Cartesian3.normalize(w,w),w},u_scanColor:r}});return this.viewer.scene.postProcessStages.add(_),_}},{key:"_getRadarScanShader",value:function(){var e="uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform vec3 u_scanLineNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\nvec4 toEye(in vec2 uv, in float depth)\n {\n vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n posInCamera =posInCamera / posInCamera.w;\n return posInCamera;\n }\nbool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 v01 = testPt - ptOnLine;\nnormalize(v01);\nvec3 temp = cross(v01, lineNormal);\nfloat d = dot(temp, u_scanPlaneNormalEC);\nreturn d > 0.5;\n}\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n{\nvec3 v01 = point -planeOrigin;\nfloat d = dot(planeNormal, v01) ;\nreturn (point - planeNormal * d);\n}\nfloat distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\nreturn length(tempPt - ptOnLine);\n}\nfloat getDepth(in vec4 depth)\n{\nfloat z_window = czm_unpackDepth(depth);\nz_window = czm_reverseLogDepth(z_window);\nfloat n_range = czm_depthRange.near;\nfloat f_range = czm_depthRange.far;\nreturn (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main()\n{\ngl_FragColor = texture2D(colorTexture, v_textureCoordinates);\nfloat depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\nvec4 viewPos = toEye(v_textureCoordinates, depth);\nvec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\nfloat dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\nfloat twou_radius = u_radius * 2.0;\nif(dis < u_radius)\n{\nfloat f0 = 1.0 -abs(u_radius - dis) / u_radius;\nf0 = pow(f0, 64.0);\nvec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\nfloat f = 0.0;\nif(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n{\nfloat dis1= length(prjOnPlane.xyz - lineEndPt);\nf = abs(twou_radius -dis1) / twou_radius;\nf = pow(f, 3.0);\n}\ngl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n}\n}\n";return e}},{key:"clearScanEffects",value:function(e){this.viewer.scene.postProcessStages.remove(e)}}]),e}());t["a"]=n},4488:function(e,t,r){var i=r("4162");e.exports=i(1..valueOf)},"49ad":function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=r("4eba"),o=(r("2237"),function(){function e(t,r,a){Object(i["a"])(this,e),Object(n["a"])(this,"viewer",void 0),Object(n["a"])(this,"id",void 0),Object(n["a"])(this,"duration",void 0),Object(n["a"])(this,"maxRadius",void 0),Object(n["a"])(this,"pointDraged",void 0),Object(n["a"])(this,"leftDownFlag",void 0),Object(n["a"])(this,"update_position",void 0),this.Cesium=t,this.viewer=r,this.id=a,this.duration=1e3,this.maxRadius=1e3,this.pointDraged=null,this.leftDownFlag=!1}return Object(a["a"])(e,[{key:"change_duration",value:function(e){this.duration=e}},{key:"change_color",value:function(e){var t=this.Cesium,r=this.viewer.entities.getById(this.id);r._ellipse._material.color=new t.Color.fromCssColorString(e)}},{key:"change_position",value:function(e){var t=this.Cesium,r=t.Cartesian3.fromDegrees(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])),i=this.viewer.entities.getById(this.id);i.position=r}},{key:"del",value:function(){this.viewer.entities.removeById(this.id)}},{key:"add",value:function(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=this.Cesium,o=this;function s(e){o.pointDraged=o.viewer.scene.pick(e.position),o.pointDraged&&o.pointDraged.id&&o.pointDraged.id.id===o.id&&(o.leftDownFlag=!0,o.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function c(e){o.leftDownFlag=!1,o.pointDraged=null,o.viewer.scene.screenSpaceCameraController.enableRotate=!0}function l(e){if(!0===o.leftDownFlag&&null!==o.pointDraged&&void 0!==o.pointDraged){var t=o.viewer.camera.getPickRay(e.endPosition),r=o.viewer.scene.globe.pick(t,o.viewer.scene);o.pointDraged.id.position=r;var i=o.viewer.scene.globe.ellipsoid,a=i.cartesianToCartographic(r),s=n.Math.toDegrees(a.latitude),c=n.Math.toDegrees(a.longitude),l=a.height;l=l<0?0:l,o.update_position&&o.update_position([c.toFixed(8),s.toFixed(8),l])}}this.duration=i,this.maxRadius=r,a&&(this.viewer.screenSpaceEventHandler.setInputAction(s,n.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(c,n.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(l,n.ScreenSpaceEventType.MOUSE_MOVE))}}]),e}());t["a"]=o},"4bb1":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("a567");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"68de2":function(e,t,r){"use strict";var i=r("4eba"),a=r("4bb1"),n=r("e143"),o=(r("f8c7"),r("5e94"),r("5f01"),r("150a"),r("eb3b"),r("b1f6"),r("19bc"),r("2237"),r("e9d3")),s=function(){function e(t,r){Object(a["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(n["a"])(e,[{key:"setLayer",value:function(e){var t=this.Cesium,r=this.viewer.imageryLayers;function i(){return new t[e.type](e.classConfig)}r.addImageryProvider(i(e));var a=new o["a"],n=a.colorRgb(e.filterRGB);r.filterRGB=n,r.invertColor=e.invertswitch;var s=e.offset.split(",");if(2===s.length)try{var c=[parseFloat(s[0]),parseFloat(s[1])];setTimeout((function(){var e=r.imageryProvider;if(!e)return!1;var t=e.tilingScheme._rectangleNortheastInMeters;t.x+=c[0],t.y+=c[1]}),2e3)}catch(l){console.log(l)}this.changeImageryProviderColors(r),this.isShowImagery(e.isShow,r)}},{key:"changeImageryProviderColors",value:function(e){for(var t=this.viewer.scene.globe._surfaceShaderSet.baseFragmentShaderSource.sources,r=0;r<t.length;r++){var i=t[r],a="color = czm_saturation(color, textureSaturation);\n#endif\n",n="color = czm_saturation(color, textureSaturation);\n#endif\n";e.invertColor&&(n+="\n                        color.r = 1.0 - color.r;\n                        color.g = 1.0 - color.g;\n                        color.b = 1.0 - color.b;\n                        ",n+="\n                        color.r = color.r * ".concat(e.filterRGB[0],".0/255.0;\n                        color.g = color.g * ").concat(e.filterRGB[1],".0/255.0;\n                        color.b = color.b * ").concat(e.filterRGB[2],".0/255.0;\n                        ")),-1!==i.indexOf(a)&&(t[r]=t[r].replace(a,n))}}},{key:"isShowImagery",value:function(e,t){t.show=e}},{key:"createWhiteMold",value:function(e){var t,r=this.Cesium;return this.viewer.scene.primitives.add(new r.Cesium3DTileset((t={url:e,show:!0,shadows:4,maximumScreenSpaceError:1,maximumNumberOfLoadedTiles:1e3,skipLevelOfDetail:!0,baseScreenSpaceError:1024},Object(i["a"])(t,"maximumScreenSpaceError",256),Object(i["a"])(t,"skipScreenSpaceErrorFactor",16),Object(i["a"])(t,"skipLevels",1),Object(i["a"])(t,"immediatelyLoadDesiredLevelOfDetail",!1),Object(i["a"])(t,"loadSiblings",!0),Object(i["a"])(t,"cullWithChildrenBounds",!0),Object(i["a"])(t,"cullRequestsWhileMoving",!0),Object(i["a"])(t,"cullRequestsWhileMovingMultiplier",10),Object(i["a"])(t,"preloadWhenHidden",!0),Object(i["a"])(t,"preferLeaves",!0),Object(i["a"])(t,"maximumMemoryUsage",128),Object(i["a"])(t,"progressiveResolutionHeightFraction",.5),Object(i["a"])(t,"dynamicScreenSpaceErrorDensity",.1),Object(i["a"])(t,"dynamicScreenSpaceErrorFactor",1),Object(i["a"])(t,"dynamicScreenSpaceError",!0),Object(i["a"])(t,"backFaceCulling",!1),t)))}},{key:"Cesium3DTileStyle",value:function(e,t){var r=this.Cesium;e.style=new r.Cesium3DTileStyle({color:{conditions:[["true","color('".concat(t,"')")]],meta:{description:""}}})}},{key:"update3dtilesMaxtrix",value:function(e,t){var r=this.Cesium;if(e.ready){var i=r.Cartographic.fromCartesian(e.boundingSphere.center),a=r.Cartesian3.fromRadians(i.longitude,i.latitude,i.height),n=r.Cartesian3.fromRadians(i.longitude+r.Math.toRadians(t.offset_x),i.latitude+r.Math.toRadians(t.offset_y),i.height+t.offset_z),o=r.Cartesian3.subtract(n,a,new r.Cartesian3);e.modelMatrix=r.Matrix4.fromTranslation(o)}}},{key:"makeEffect",value:function(e,t){var r=[],i=new o["a"];e.tileVisible.addEventListener((function(e){for(var a=e.content,n=a.featuresLength,o=i.colorRgb1(t.effect_color),s=function(e){var i=a.getFeature(e).content._model;i&&i._sourcePrograms&&i._rendererResources&&(Object.getOwnPropertyNames(i._sourcePrograms).forEach((function(e){var a=i._sourcePrograms[e];r[0]||(r[0]=i._rendererResources.sourceShaders[a.fragmentShader]),1!==t.effectswitch?i._rendererResources.sourceShaders[a.fragmentShader]=r[0]:i._rendererResources.sourceShaders[a.fragmentShader]="\n                                        varying vec3 v_positionEC;\n                                        void main(void){\n                                            vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n                                            float glowRange = ".concat(t.height.toFixed(2),"; // 光环的移动范围(高度)\n                                            gl_FragColor = vec4(").concat(o[0],", ").concat(o[1],", ").concat(o[2],", 1.0); // 颜色\n                                            // 底楼 亮度太暗了，那么把20%以内的底楼，都不再变暗\n                                            if((position.z / 100.0) < 0.2) {\n                                            gl_FragColor *= vec4(vec3(position.z / 100.0 * 2.0), 1.0);\n                                            }else{\n                                            gl_FragColor *= vec4(vec3(position.z / 100.0), 1.0); // 渐变\n                                            }\n                                            // 动态光环\n                                            float time = fract(czm_frameNumber / 360.0);\n                                            time = abs(time - 0.5) * 2.0;\n                                            float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));\n                                            gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n                                        }\n                                        ")})),i._shouldRegenerateShaders=1===t.effectswitch||!1)},c=0;c<n;c+=2)s(c)}))}},{key:"otherSettings",value:function(e){var t=this.Cesium;if(this.viewer._cesiumWidget._creditContainer.style.display="none",this.viewer.scene.backgroundColor=t.Color.TRANSPARENT,this.viewer.scene.globe.baseColor=t.defined(e)&&e.globeBaseColor&&t.defined(e.globeBaseColor.r)&&t.defined(e.globeBaseColor.g)&&t.defined(e.globeBaseColor.b)&&t.defined(e.globeBaseColor.a)?new t.Color(e.globeBaseColor.r/255,e.globeBaseColor.g/255,e.globeBaseColor.b/255,e.globeBaseColor.a):new t.Color(9/255,25/255,.2,1),this.viewer.scene.undergroundMode=(!t.defined(e)||void 0!==e.undergroundMode)&&e.undergroundMode,this.viewer.scene.screenSpaceCameraController._zoomFactor=t.defined(e)&&void 0===e._zoomFactor?5:e._zoomFactor,this.viewer.scene.globe.depthTestAgainstTerrain=!0,this.viewer.scene.globe.show=!(!t.defined(e)||void 0!==e.isGlobe)||e.isGlobe,t.FeatureDetection.supportsImageRenderingPixelated()){var r=window.devicePixelRatio;while(r>=2)r/=2;this.viewer.resolutionScale=r}if(this.viewer.scene.fxaa=!0,this.viewer.scene.postProcessStages.fxaa.enabled=!0,this.viewer._cesiumWidget._supportsImageRenderingPixelated=t.FeatureDetection.supportsImageRenderingPixelated(),this.viewer._cesiumWidget._forceResize=!0,t.FeatureDetection.supportsImageRenderingPixelated()){r=window.devicePixelRatio;while(r>=2)r/=2;this.viewer.resolutionScale=r}}}]),e}();t["a"]=s},"78be":function(e,t,r){var i=r("46a7"),a=r("bc35"),n=r("5386");i({target:"Array",proto:!0},{fill:a}),n("fill")},"870b":function(e,t,r){var i=r("46a7"),a=r("4cf9"),n=r("5621"),o=r("9923"),s=r("a731"),c=r("6311"),l=r("6b85");function u(e,t){var r,i,d=arguments.length<3?e:arguments[2];return o(e)===d?e[t]:(r=c.f(e,t),r?s(r)?r.value:void 0===r.get?void 0:a(r.get,d):n(i=l(e))?u(i,t,d):void 0)}i({target:"Reflect",stat:!0},{get:u})},8909:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=r("c686"),o=r("b5db"),s=r("e4ae"),c=r("721f"),l=r("49ad"),u=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(e){var t=this.Cesium,r=(this.viewer,null!==e&&void 0!==e&&e.cesiumName?e.cesiumName:"");function i(){this._definitionChanged=new t.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color,this._time=(new Date).getTime()}Object.defineProperties(i.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:t.createPropertyDescriptor("color")});var a="HexagonSpreadMaterial".concat(parseInt(1e3*Math.random()));return i.prototype.getType=function(e){return a},i.prototype.getValue=function(e,r){return t.defined(r)||(r={}),r.color=t.Property.getValueOrClonedDefault(this._color,e,t.Color.WHITE,r.color),r.image=t.Material.HexagonSpreadMaterialImage,r},i.prototype.equals=function(e){return this===e||e instanceof i&&t.Property.equals(this._color,e._color)},t.Material.HexagonSpreadMaterialImage="/cesium-template/cesium/effects/Materials/hexagon.png",t.Material.HexagonSpreadSource="\n        czm_material czm_getMaterial(czm_materialInput materialInput)\n        {\n             czm_material material = czm_getDefaultMaterial(materialInput);\n             vec2 st = materialInput.st;\n             vec4 colorImage = texture2D(image,  vec2(st));\n             material.alpha = colorImage.a * color.a * 0.5;\n             material.diffuse =  1.8 * color.rgb  ;\n             return material;\n         }\n         ",t.Material._materialCache.addMaterial(a,{fabric:{type:t.Material.HexagonSpreadMaterialType,uniforms:{color:new t.Color(1,0,0,.5),image:t.Material.HexagonSpreadMaterialImage},source:t.Material.HexagonSpreadSource},translucent:function(e){return!0}}),t[r]=i,i}}]),e}(),d=u,h=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(e,a,n){var o;return Object(i["a"])(this,r),o=t.call(this,e,a,n),o._HexagonSpreadMaterialProperty=new d(e,a),o}return Object(a["a"])(r,[{key:"add",value:function(e,t,i,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this.Cesium;Object(n["a"])(Object(o["a"])(r.prototype),"add",this).call(this,e,t,i,a,s);var l=this,u=1;this._HexagonSpreadMaterialProperty.create({cesiumName:"HexagonSpreadMaterialProperty",color:new c.Color.fromCssColorString(t)}),this.viewer.entities.add({id:l.id,position:c.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMajorAxis:new c.CallbackProperty((function(e){return u+=1e3/l.duration*50,u>l.maxRadius&&(u=1),u}),!1),semiMinorAxis:new c.CallbackProperty((function(e){return u}),!1),material:new c.HexagonSpreadMaterialProperty}})}}]),r}(l["a"]);t["a"]=h},"97df":function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=r("a035"),o=r("c686"),s=r("b5db"),c=r("e4ae"),l=r("721f"),u=r("4eba"),d=r("49ad"),h=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(e){var t=this.Cesium,r=(this.viewer,null!==e&&void 0!==e&&e.cesiumName?e.cesiumName:"");function i(){this._definitionChanged=new t.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color,this.duration=t.defaultValue(e.duration,1e3),this.count=t.defaultValue(e.count,2),this.count<=0&&(this.count=1),this.gradient=t.defaultValue(e.gradient,.1),0===this.gradient&&(this.gradient=0),this.gradient>1&&(this.gradient=1),this._time=(new Date).getTime()}Object.defineProperties(i.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:t.createPropertyDescriptor("color"),duration:t.createPropertyDescriptor("duration"),count:t.createPropertyDescriptor("count")});var a="CircleWaveMaterial".concat(parseInt(1e3*Math.random()));return i.prototype.getType=function(e){return a},i.prototype.getValue=function(e,r){return t.defined(r)||(r={}),r.color=t.Property.getValueOrClonedDefault(this._color,e,t.Color.WHITE,r.color),r.time=((new Date).getTime()-this._time)%this.duration/this.duration,r.count=this.count,r.gradient=1+10*(1-this.gradient),r},i.prototype.equals=function(e){return this===e||e instanceof i&&t.Property.equals(this._color,e._color)},t.Material.CircleWaveSource="\n                                  czm_material czm_getMaterial(czm_materialInput materialInput) {\n                                    czm_material material = czm_getDefaultMaterial(materialInput);\n                                    material.diffuse = 1.5 * color.rgb;\n                                    vec2 st = materialInput.st;\n                                    vec3 str = materialInput.str;\n                                    float dis = distance(st, vec2(0.5, 0.5));\n                                    float per = fract(time);\n                                    if (abs(str.z) > 0.001) {\n                                      discard;\n                                    }\n                                    if (dis > 0.5) {\n                                      discard;\n                                    } else {\n                                      float perDis = 0.5 / count;\n                                      float disNum;\n                                      float bl = .0;\n                                      for (int i = 0; i <= 9; i++) {\n                                        if (float(i) <= count) {\n                                          disNum = perDis *float(i) - dis + per / count;\n                                          if (disNum > 0.0) {\n                                            if (disNum < perDis) {\n                                              bl = 1.0 - disNum / perDis;\n                                            } else if(disNum - perDis < perDis) {\n                                              bl = 1.0 - abs(1.0 - disNum / perDis);\n                                            }\n                                            material.alpha = pow(bl, gradient);\n                                          }\n                                        }\n                                      }\n                                    }\n                                    return material;\n                                  }\n                                  ",t.Material._materialCache.addMaterial(a,{fabric:{type:a,uniforms:{color:new t.Color(1,0,0,1),time:1,count:1,gradient:.1},source:t.Material.CircleWaveSource},translucent:function(e){return!0}}),t[r]=i,i}}]),e}(),p=h,f=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(e,a,o){var s;return Object(i["a"])(this,r),s=t.call(this,e,a,o),Object(u["a"])(Object(n["a"])(s),"count",void 0),s._CircleWaveMaterialProperty=new p(e,a),s}return Object(a["a"])(r,[{key:"change_duration",value:function(e){Object(o["a"])(Object(s["a"])(r.prototype),"change_duration",this).call(this,e);var t=this.viewer.entities.getById(this.id);t._ellipse._material.duration=e}},{key:"change_waveCount",value:function(e){var t=this.viewer.entities.getById(this.id);t._ellipse._material.count=e}},{key:"add",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3,l=this.Cesium;Object(o["a"])(Object(s["a"])(r.prototype),"add",this).call(this,e,t,i,a,n);var u=this;this.count=c,this._CircleWaveMaterialProperty.create({cesiumName:"CircleWaveMaterialProperty",duration:a,gradient:0,color:new l.Color.fromCssColorString(t),count:c}),this.viewer.entities.add({id:u.id,position:l.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new l.CallbackProperty((function(e){return u.maxRadius}),!1),semiMajorAxis:new l.CallbackProperty((function(e){return u.maxRadius}),!1),material:new l.CircleWaveMaterialProperty}})}}]),r}(d["a"]);t["a"]=f},a3d8:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=r("c686"),o=r("b5db"),s=r("e4ae"),c=r("721f"),l=r("49ad"),u=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(t){var r=this.Cesium,i=(this.viewer,null!==t&&void 0!==t&&t.cesiumName?t.cesiumName:"");function a(){this._definitionChanged=new r.Event,this.color=t.color||r.Color.YELLOW,this.speed=t.speed||10}Object.defineProperties(a.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:r.createPropertyDescriptor("color"),speed:r.createPropertyDescriptor("speed")});var n="Scanline".concat(parseInt(1e3*Math.random()));return a.prototype.getType=function(e){return n},a.prototype.getValue=function(e,t){return r.defined(t)||(t={}),t.color=r.Property.getValueOrClonedDefault(this._color,e,r.Color.WHITE,t.color),t.speed=this.speed,t},a.prototype.equals=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{color:color,speed:speed},i=this===t||t instanceof e&&r.Property.equals(this.color,t.color)&&r.Property.equals(this.speed,t.speed);return i},r.Material.ScanlineSource="\n        uniform vec4 color;\n        uniform float speed;\n        float circle(vec2 uv, float r, float blur) {\n          float d = length(uv) * 1.0; /* 2.0 */\n          float c = smoothstep(r+blur, r, d);\n          return c;\n        }\n        czm_material czm_getMaterial(czm_materialInput materialInput)\n        {\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          vec2 st = materialInput.st - 0.5;\n          material.diffuse = 2.8 * color.rgb;\n          material.emission = vec3(0);\n          float t = fract(czm_frameNumber * (11000.0 - speed) / 500000.0);\n          float s = 0.3;\n          float radius1 = smoothstep(.0, s, t) * 0.5;\n          float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);\n          float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);\n          float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;\n          float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);\n          material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\n          material.alpha *= color.a ;\n          return material;\n        }\n        ",r.Material._materialCache.addMaterial(n,{fabric:{type:r.Material.ScanlineType,uniforms:{color:new r.Color(1,0,0,.5),time:0,speed:10},source:r.Material.ScanlineSource},translucent:function(e){return!0}}),r[i]=a,a}}]),e}(),d=u,h=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(e,a,n){var o;return Object(i["a"])(this,r),o=t.call(this,e,a,n),o._ScanlineMaterialProperty=new d(e,a),o}return Object(a["a"])(r,[{key:"change_duration",value:function(e){Object(n["a"])(Object(o["a"])(r.prototype),"change_duration",this).call(this,e);var t=this.viewer.entities.getById(this.id);t._ellipse._material.speed=e}},{key:"add",value:function(e,t,i,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this.Cesium;Object(n["a"])(Object(o["a"])(r.prototype),"add",this).call(this,e,t,i,a,s);var l=this;this._ScanlineMaterialProperty.create({cesiumName:"ScanlineMaterialProperty",color:new c.Color.fromCssColorString(t),speed:a}),this.viewer.entities.add({id:l.id,position:c.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMinorAxis:new c.CallbackProperty((function(e){return l.maxRadius}),!1),semiMajorAxis:new c.CallbackProperty((function(e){return l.maxRadius}),!1),material:new c.ScanlineMaterialProperty,classificationType:c.ClassificationType.BOTH}})}}]),r}(l["a"]);t["a"]=h},a731:function(e,t,r){var i=r("a220");e.exports=function(e){return void 0!==e&&(i(e,"value")||i(e,"writable"))}},bc35:function(e,t,r){"use strict";var i=r("735b"),a=r("32da"),n=r("1c60");e.exports=function(e){var t=i(this),r=n(t),o=arguments.length,s=a(o>1?arguments[1]:void 0,r),c=o>2?arguments[2]:void 0,l=void 0===c?r:a(c,r);while(l>s)t[s++]=e;return t}},c686:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("eb3b"),r("68eb"),r("870b"),r("8877");var i=r("b5db");function a(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(i["a"])(e),null===e)break;return e}function n(){return n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=a(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},n.apply(this,arguments)}},c78a:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=(r("eb3b"),r("b1f6"),function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r,this.lastStageList=[]}return Object(a["a"])(e,[{key:"add",value:function(e,t,r,i){this.lastStageList.push(this.showCircleScan(e,t,r,i))}},{key:"clear",value:function(){var e=this;this.lastStageList.forEach((function(t){e.clearScanEffects(t)})),this.lastStageList=[]}},{key:"showCircleScan",value:function(e,t,r,i){var a=this.Cesium,n=new a.Cartographic(a.Math.toRadians(e[0]),a.Math.toRadians(e[1]),e[2]);t=new a.Color.fromCssColorString(t);var o=this._addCircleScanPostStage(n,r,t,i);return o}},{key:"_addCircleScanPostStage",value:function(e,t,r,i){var a=this.Cesium,n=a.Cartographic.toCartesian(e),o=new a.Cartesian4(n.x,n.y,n.z,1),s=new a.Cartographic(e.longitude,e.latitude,e.height+500),c=a.Cartographic.toCartesian(s),l=new a.Cartesian4(c.x,c.y,c.z,1),u=(new Date).getTime(),d=new a.Cartesian4,h=new a.Cartesian4,p=new a.Cartesian3,f=this,m=new a.PostProcessStage({fragmentShader:f._getScanSegmentShader(),uniforms:{u_scanCenterEC:function(){var e=a.Matrix4.multiplyByVector(f.viewer.camera._viewMatrix,o,d);return e},u_scanPlaneNormalEC:function(){var e=a.Matrix4.multiplyByVector(f.viewer.camera._viewMatrix,o,d),t=a.Matrix4.multiplyByVector(f.viewer.camera._viewMatrix,l,h);return p.x=t.x-e.x,p.y=t.y-e.y,p.z=t.z-e.z,a.Cartesian3.normalize(p,p),p},u_radius:function(){return t*(((new Date).getTime()-u)%i)/i},u_scanColor:r}});return this.viewer.scene.postProcessStages.add(m),m}},{key:"_getScanSegmentShader",value:function(){var e=18,t=" uniform sampler2D colorTexture;\n        uniform sampler2D depthTexture;\n        varying vec2 v_textureCoordinates;\n        uniform vec4 u_scanCenterEC;\n        uniform vec3 u_scanPlaneNormalEC;\n        uniform float u_radius;\n        uniform vec4 u_scanColor;\n        vec4 toEye(in vec2 uv, in float depth){\n          vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n          vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n          posInCamera =posInCamera / posInCamera.w;\n          return posInCamera;\n        }\n        vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n            vec3 v01 = point - planeOrigin;\n            float d = dot(planeNormal, v01) ;\n            return (point - planeNormal * d);\n        }\n        float getDepth(in vec4 depth){\n            float z_window = czm_unpackDepth(depth);\n            z_window = czm_reverseLogDepth(z_window);\n            float n_range = czm_depthRange.near;\n            float f_range = czm_depthRange.far;\n            return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n        }\n        void main(){\n            gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n            float depth = getDepth(texture2D(depthTexture, v_textureCoordinates));\n            vec4 viewPos = toEye(v_textureCoordinates, depth);\n            vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n            float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n            if(dis < u_radius){\n              float f = 1.0 - abs(u_radius - dis) / u_radius;\n              f = pow(f, float("+e+"));\n              gl_FragColor = mix(gl_FragColor,u_scanColor,f);\n            }\n            gl_FragColor.a = gl_FragColor.a / 2.0;\n        }\n      ";return t}},{key:"clearScanEffects",value:function(e){this.viewer.scene.postProcessStages.remove(e)}}]),e}());t["a"]=n},d56e:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=r("4eba"),o=(r("2237"),r("78be"),r("2afa"),function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(t){var r=this.Cesium,i=(this.viewer,null!==t&&void 0!==t&&t.cesiumName?t.cesiumName:"");function a(){this._definitionChanged=new r.Event,this._color=void 0,this._colorSubscription=void 0,this.color=t.color}Object.defineProperties(a.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:r.createPropertyDescriptor("color")});var n="WallGradients".concat(parseInt(1e3*Math.random()));return a.prototype.getType=function(e){return n},a.prototype.getValue=function(e,t){return r.defined(t)||(t={}),t.color=r.Property.getValueOrClonedDefault(this._color,e,r.Color.WHITE,t.color),t.image=r.Material.WallGradientsImage,t},a.prototype.equals=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_color:_color},i=this===t||t instanceof e&&r.Property.equals(this._color,t._color);return i},r.Material.WallGradientsImage="/cesium-template/cesium/effects/Materials/wallgradients.png",r.Material.WallGradientsSource="\n      czm_material czm_getMaterial(czm_materialInput materialInput)\n      {\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          vec2 st = materialInput.st;\n          vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\n          material.alpha = colorImage.a * color.a;\n          material.diffuse =  2.5 * color.rgb  ;\n          return material;\n      }\n      ",r.Material._materialCache.addMaterial(n,{fabric:{type:r.Material.WallGradientsType,uniforms:{color:new r.Color(0,1,0,.5),image:r.Material.WallGradientsImage,time:0},source:r.Material.WallGradientsSource},translucent:function(e){return!0}}),r[i]=a,a}}]),e}()),s=o,c=function(){function e(t,r,a){Object(i["a"])(this,e),Object(n["a"])(this,"viewer",void 0),Object(n["a"])(this,"id",void 0),Object(n["a"])(this,"duration",void 0),Object(n["a"])(this,"maxRadius",void 0),Object(n["a"])(this,"pointDraged",void 0),Object(n["a"])(this,"leftDownFlag",void 0),Object(n["a"])(this,"update_position",void 0),Object(n["a"])(this,"wallHeight",void 0),Object(n["a"])(this,"position",void 0),Object(n["a"])(this,"edgeCount",void 0),this.Cesium=t,this.viewer=r,this.id=a,this.duration=1e3,this.maxRadius=1e3,this.pointDraged=null,this.leftDownFlag=!1,this.position=null,this.edgeCount=0,this._WallGradientsMaterialProperty=new s(t,r)}return Object(a["a"])(e,[{key:"del",value:function(){this.viewer.entities.removeById(this.id)}},{key:"change_position",value:function(e){var t=this.Cesium,r=t.Cartographic.fromDegrees(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));r.height<0&&(r.height=0),this.position=r}},{key:"change_color",value:function(e){var t=this.Cesium,r=this.viewer.entities.getById(this.id);r._wall._material.color=new t.Color.fromCssColorString(e)}},{key:"change_height",value:function(e){this.wallHeight=e}},{key:"change_duration",value:function(e){this.duration=e}},{key:"add",value:function(e,t,r,i,a){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=this.Cesium;e=s.Cartographic.fromDegrees(e[0],e[1],e[2]),e.height<0&&(e.height=0),this.position=e,this.wallHeight=a,this.duration=i,this.maxRadius=r,this.edgeCount=n;var c=r,l=this.getrPositions({},r,e,n,c),u=this;o&&this.mouseEvent(),this._WallGradientsMaterialProperty.create({cesiumName:"WallGradientsMaterialProperty",color:new s.Color.fromCssColorString(t)}),this.viewer.entities.add({id:u.id,wall:{positions:new s.CallbackProperty((function(e){var t=u.getPositions(c,u.maxRadius,u.getrPositions(l,u.maxRadius,u.position,u.edgeCount,c),u.getcenterDegrees(u.position),u.duration,u.edgeCount);return c=t.currentRadius,l=t.rPositions,l[c]}),!1),minimumHeights:new s.CallbackProperty((function(e){var t=u.getminimumHeights(l[u.maxRadius]);return t}),!1),maximumHeights:new s.CallbackProperty((function(e){var t=u.getmaximumHeights(l[u.maxRadius]);return t}),!1),material:new s.WallGradientsMaterialProperty}})}},{key:"mouseEvent",value:function(){var e=this.Cesium,t=this;function r(e){t.pointDraged=t.viewer.scene.pick(e.position),t.pointDraged&&t.pointDraged.id&&t.pointDraged.id.id===t.id&&(t.leftDownFlag=!0,t.viewer.scene.screenSpaceCameraController.enableRotate=!1)}function i(e){t.leftDownFlag=!1,t.pointDraged=null,t.viewer.scene.screenSpaceCameraController.enableRotate=!0}function a(r){if(!0===t.leftDownFlag&&null!==t.pointDraged&&void 0!==t.pointDraged){var i=t.viewer.camera.getPickRay(r.endPosition),a=t.viewer.scene.globe.pick(i,t.viewer.scene),n=t.viewer.scene.globe.ellipsoid,o=n.cartesianToCartographic(a),s=e.Math.toDegrees(o.latitude),c=e.Math.toDegrees(o.longitude),l=o.height;l=l<0?0:l,t.update_position&&t.update_position([c.toFixed(8),s.toFixed(8),l]),t.change_position([c.toFixed(8),s.toFixed(8),l])}}this.viewer.screenSpaceEventHandler.setInputAction(r,e.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(i,e.ScreenSpaceEventType.LEFT_UP),this.viewer.screenSpaceEventHandler.setInputAction(a,e.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"getrPositions",value:function(e,t,r,i,a){var n=this.getcenterDegrees(this.position);return r=this.generateCirclePoints([n[0],n[1]],a,i),r=this.pointsToPositions(r,n[2]),e[t]=r,e}},{key:"getcenterDegrees",value:function(e){var t=this.Cesium,r=[t.Math.toDegrees(e.longitude),t.Math.toDegrees(e.latitude),e.height];return r}},{key:"getminimumHeights",value:function(e){return new Array(e.length).fill(this.position.height)}},{key:"getmaximumHeights",value:function(e){return new Array(e.length).fill(this.position.height+this.wallHeight)}},{key:"getPositions",value:function(e,t,r,i,a,n){if(e+=1e3/a*20,e>t&&(e=1))return{rPositions:r,currentRadius:e};var o=this.generateCirclePoints([i[0],i[1]],e,n);return o=this.pointsToPositions(o,i[2]),r[e]=o,{rPositions:r,currentRadius:e}}},{key:"pointsToPositions",value:function(e,t){var r=this.Cesium,i=[];return e.map((function(e){i.push(r.Cartesian3.fromDegrees(e[0],e[1],t))})),i}},{key:"generateCirclePoints",value:function(e,t,r){var i=[];if(r)for(var a=360/r,n=0;n<=360;n+=a)i.push(this.getCirclePoint(e[0],e[1],n,t));else for(var o=0;o<=360;o+=2)i.push(this.getCirclePoint(e[0],e[1],o,t));return i}},{key:"getCirclePoint",value:function(e,t,r,i){var a=i*Math.sin(r*Math.PI/180);return i*=Math.cos(r*Math.PI/180),[180*(a/((r=6356725+21412*(90-t)/90)*Math.cos(t*Math.PI/180))+e*Math.PI/180)/Math.PI,180*(i/r+t*Math.PI/180)/Math.PI]}}]),e}();t["a"]=c},d97d:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=(r("eb3b"),r("b1f6"),r("34b1"),r("3977")),o=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(t){var r=this.Cesium,i=(this.viewer,null!==t&&void 0!==t&&t.cesiumName?t.cesiumName:"");function a(){this._definitionChanged=new r.Event,this.colorSubscription=void 0,this.speed=t.speed||6*Math.random(),this.color=t.color||r.Color.RED,this.percent=t.percent||.1,this.gradient=t.gradient||.01}Object.defineProperties(a.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:r.createPropertyDescriptor("color"),speed:r.createPropertyDescriptor("speed"),gradient:r.createPropertyDescriptor("gradient"),percent:r.createPropertyDescriptor("percent")});var n="PolylineTrail".concat(parseInt(1e3*Math.random()));return a.prototype.getType=function(e){return n},a.prototype.getValue=function(e,t){return r.defined(t)||(t={}),t.color=r.Property.getValueOrClonedDefault(this.color,e,r.Color.WHITE,t.color),t.speed=this.speed,t.gradient=this.gradient,t.percent=this.percent,t},a.prototype.equals=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{color:color,speed:speed};return this===t||t instanceof e&&this.speed===t.speed&&r.Property.equals(this.color,t.color)},r.Material.PolylineTrailSource="\n          uniform vec4 color;\n          uniform float speed;\n          uniform float percent;\n          uniform float gradient;\n          \n          czm_material czm_getMaterial(czm_materialInput materialInput){\n            czm_material material = czm_getDefaultMaterial(materialInput);\n            vec2 st = materialInput.st;\n            float t = fract(czm_frameNumber * speed / 1000.0);\n            t *= (1.0 + percent);\n            float alpha = smoothstep(t- percent, t, st.s) * step(-t, -st.s);\n            alpha += gradient;\n            material.diffuse = color.rgb;\n            material.alpha = alpha;\n            return material;\n          }\n          ",r.Material._materialCache.addMaterial(n,{fabric:{type:r.Material.PolylineTrailType,uniforms:{color:new r.Color(1,0,0,.5),transparent:!0,speed:0,gradient:.01,percent:.1},source:r.Material.PolylineTrailSource},translucent:function(e){return!0}}),r[i]=a,a}}]),e}(),s=o,c=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(t){var r=this.Cesium,i=(this.viewer,null!==t&&void 0!==t&&t.cesiumName?t.cesiumName:"");function a(){this._definitionChanged=new r.Event,this.duration=t.duration,this.image=t.image,this._time=performance.now()}Object.defineProperties(a.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:r.createPropertyDescriptor("color"),duration:r.createPropertyDescriptor("duration")});var n="Spriteline1".concat(parseInt(1e3*Math.random()));return a.prototype.getType=function(e){return n},a.prototype.getValue=function(e,t){return r.defined(t)||(t={}),t.image=this.image,t.time=(performance.now()-this._time)%this.duration/this.duration,t},a.prototype.equals=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{duration:duration};return this===t||t instanceof e&&this.duration===t.duration},r.Material.Spriteline1Source="\n                    czm_material czm_getMaterial(czm_materialInput materialInput)\n                    {\n                    czm_material material = czm_getDefaultMaterial(materialInput);\n                    vec2 st = materialInput.st;\n                    vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                    material.alpha = colorImage.a;\n                    material.diffuse = colorImage.rgb * 1.5 ;\n                    return material;\n                    }\n                    ",r.Material._materialCache.addMaterial(n,{fabric:{type:r.Material.Spriteline1Type,uniforms:{color:new r.Color(1,0,0,.5),image:"",transparent:!0,time:20},source:r.Material.Spriteline1Source},translucent:function(e){return!0}}),r[i]=a,a}}]),e}(),l=c,u=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r,this.FlyLinesEntities=[],this._PolylineTrailMaterialProperty=new s(t,r),this._Spriteline1MaterialProperty=new l(t,r)}return Object(a["a"])(e,[{key:"flyLines",value:function(e,t,r,i,a,o,s,c){var l=this.Cesium,u=this;this._PolylineTrailMaterialProperty.create({cesiumName:"PolylineTrailMaterialProperty",speed:a*Math.random(),color:new l.Color.fromCssColorString(t),percent:o,gradient:s});var d,h,p,f=n["randomPoint"](c,{bbox:e}),m=f.features;m.forEach((function(e){d=e.geometry.coordinates,h=l.Cartesian3.fromDegrees(d[0],d[1],0),p=l.Cartesian3.fromDegrees(d[0],d[1],i*Math.random()),u.FlyLinesEntities.push(u.viewer.entities.add({polyline:{positions:[h,p],width:r,material:new l.PolylineTrailMaterialProperty}}))}))}},{key:"RoadPic",value:function(e,t,r,i){var a=this,n=this.Cesium;this._Spriteline1MaterialProperty.create({cesiumName:"Spriteline1MaterialProperty",duration:i,image:t});var o=n.GeoJsonDataSource.load(e);o.then((function(e){a.viewer.dataSources.add(e),a.RoadPicEntities=e.entities.values;for(var t=0;t<a.RoadPicEntities.length;t++){var i=a.RoadPicEntities[t];i.polyline.width=r,i.polyline.material=new n.Spriteline1MaterialProperty}}))}}]),e}();t["a"]=u},e143:function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,"a",(function(){return a}))},e9d3:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=(r("7502"),r("2237"),r("eb3b"),r("a567"),r("f8c7"),r("e226"),r("5f01"),r("5f07"),r("b1f6"),r("5e94"),r("62db"),function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"formCssColorString",value:function(e){var t=this.Cesium;return t.Color.fromCssColorString(e)}},{key:"getPosition",value:function(e){var t=this.Cesium,r=this.viewer,i=r.scene.camera.pickEllipsoid(e.position),a=t.Cartographic.fromCartesian(i),n=t.Math.toDegrees(a.longitude),o=t.Math.toDegrees(a.latitude),s=Number(r.camera.positionCartographic.height.toFixed(0));return{longitude:n,latitude:o,cameraHeight:s}}},{key:"terrainProviderHeight",value:function(e){var t=this.Cesium,r=t.createWorldTerrain(),i=t.sampleTerrainMostDetailed(r,e);return Promise.resolve(i)}},{key:"getSeibelCurve",value:function(e,t,r,i){var a=this.Cesium,n=[],o=a.Cartographic.fromCartesian(e),s=a.Cartographic.fromCartesian(t),c=180*o.longitude/Math.PI,l=180*o.latitude/Math.PI,u=180*s.longitude/Math.PI,d=180*s.latitude/Math.PI,h=Math.sqrt((c-u)*(c-u)+(l-d)*(l-d)),p=h*r,f=a.Cartesian3.clone(e),m=a.Cartesian3.clone(t),v=a.Cartesian3.distance(f,a.Cartesian3.ZERO),g=a.Cartesian3.distance(m,a.Cartesian3.ZERO);if(a.Cartesian3.normalize(f,f),a.Cartesian3.normalize(m,m),0===a.Cartesian3.distance(f,m))return n;var C=a.Cartesian3.angleBetween(f,m);n.push(e);for(var y=1;y<i-1;y++){var w=1*y/(i-1),b=1-w,_=Math.sin(b*C)/Math.sin(C),P=Math.sin(w*C)/Math.sin(C),M=a.Cartesian3.multiplyByScalar(f,_,new a.Cartesian3),S=a.Cartesian3.multiplyByScalar(m,P,new a.Cartesian3),x=a.Cartesian3.add(M,S,new a.Cartesian3),O=w*Math.PI,D=v*b+g*w+Math.sin(O)*p,j=a.Cartesian3.multiplyByScalar(x,D,x);n.push(j)}return n.push(t),n}},{key:"getCatesian3FromPX",value:function(e){var t=this.viewer.camera.getPickRay(e);return t?this.viewer.scene.globe.pick(t,this.viewer.scene):null}},{key:"meter2Lat",value:function(e){var t=Math.PI,r=12742*t/360;return e/r/1e3}},{key:"meter2Lng",value:function(e,t){var r=Math.PI,i=6371*Math.cos(t*r/180)*2*r/360;return e/i/1e3}},{key:"isDegreesOrCartesian",value:function(e){if(!e)throw new Error("Error in Parameter!");return"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.z||"number"===typeof e.lng&&"number"===typeof e.lat}},{key:"toDegrees",value:function(e){var t=this.Cesium;if(this.isDegreesOrCartesian(e)){var r=function(e){var r=new t.Cartesian3(e.x,e.y,e.z),i=t.Cartographic.fromCartesian(r);return{lng:parseFloat(t.Math.toDegrees(i.longitude).toFixed(8)),lat:parseFloat(t.Math.toDegrees(i.latitude).toFixed(8)),alt:parseFloat(i.height.toFixed(8))}};return e.x&&(e=r(e)),e}}},{key:"toCartesian",value:function(e){var t=this.Cesium;if(this.isDegreesOrCartesian(e)){var r=function(e){return t.Cartesian3.fromDegrees(e.lng,e.lat,e.alt||0)};return e.lng&&(e=r(e)),e}}},{key:"toWindowCoordinates",value:function(e){var t=this.Cesium,r=this.viewer;if(r&&e&&e.x&&e.y&&e.z)return t.SceneTransforms.wgs84ToWindowCoordinates(r.scene,e);if(r&&e.lng&&e.lat&&e.alt)return t.SceneTransforms.wgs84ToWindowCoordinates(r.scene,toCartesianFromDegrees(e));throw new Error("Error in Parameter!")}},{key:"colorRgb",value:function(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,r=e.toLowerCase();if(t.test(r)){if(4===r.length){for(var i="#",a=1;a<4;a+=1)i+=r.slice(a,a+1).concat(r.slice(a,a+1));r=i}for(var n=[],o=1;o<7;o+=2)n.push(parseInt("0x"+r.slice(o,o+2)));return n}return[]}},{key:"colorRgbString",value:function(e){var t=this.colorRgb(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}},{key:"colorRgb1",value:function(e){var t=this.colorRgb(e);return t.forEach((function(e,r){t[r]=(e/255).toFixed(2)})),t}},{key:"colorRGB2Hex",value:function(e){var t=e.split(",");if(t.length<=1)return e;var r=parseInt(t[0].split("(")[1]),i=parseInt(t[1]),a=parseInt(t[2].split(")")[0]),n="#"+((1<<24)+(r<<16)+(i<<8)+a).toString(16).slice(1);return n}}]),e}());t["a"]=n},ed25:function(e,t,r){"use strict";var i=r("4bb1"),a=r("e143"),n=r("c686"),o=r("b5db"),s=r("e4ae"),c=r("721f"),l=r("49ad"),u=function(){function e(t,r){Object(i["a"])(this,e),this.Cesium=t,this.viewer=r}return Object(a["a"])(e,[{key:"create",value:function(t){var r=this.Cesium,i=(this.viewer,null!==t&&void 0!==t&&t.cesiumName?t.cesiumName:"");function a(){this._definitionChanged=new r.Event,this._color=void 0,this._colorSubscription=void 0,this.color=t.color,this.duration=t.duration,this._time=(new Date).getTime()}Object.defineProperties(a.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:r.createPropertyDescriptor("color")});var n="EllipsoidFadeMaterialProperty".concat(parseInt(1e3*Math.random()));return a.prototype.getType=function(e){return n},a.prototype.getValue=function(e,t){return r.defined(t)||(t={}),t.color=r.Property.getValueOrClonedDefault(this._color,e,r.Color.WHITE,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},a.prototype.equals=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_color:_color},i=this===t||t instanceof e&&r.Property.equals(this._color,t._color);return i},r.Material.EllipsoidFadeSource="\n          czm_material czm_getMaterial(czm_materialInput materialInput) {\n            czm_material material = czm_getDefaultMaterial(materialInput);\n            \n            material.diffuse = 1.5 * color.rgb;\n            vec2 st = materialInput.st;\n            float dis = distance(st, vec2(0.5, 0.5));\n            float bl = .0;\n            float offset = 0.42;\n            if( dis > 0.5) {\n              material.alpha = 0.0;\n              discard;\n            }\n            if( dis > offset) {\n              bl = color.a * 1.0 / (0.5 - offset) * (dis - offset);\n              material.alpha =  pow(bl, 3.0);\n            } else {\n              material.alpha = 0.0;\n              discard;\n            }\n            return material;\n          }\n          ",r.Material._materialCache.addMaterial(n,{fabric:{type:r.Material.EllipsoidFadeType,uniforms:{color:new r.Color(1,0,0,.5),time:0},source:r.Material.EllipsoidFadeSource},translucent:function(e){return!0}}),r[i]=a,a}}]),e}(),d=u,h=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(e,a,n){var o;return Object(i["a"])(this,r),o=t.call(this,e,a,n),o._EllipsoidFadeMaterialProperty=new d(e,a),o}return Object(a["a"])(r,[{key:"add",value:function(e,t,i,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this.Cesium;Object(n["a"])(Object(o["a"])(r.prototype),"add",this).call(this,e,t,i,a,s);var l=this,u=1;this._EllipsoidFadeMaterialProperty.create({cesiumName:"EllipsoidFadeMaterialProperty",duration:l.duration,color:new c.Color.fromCssColorString(t)});var d=this.viewer.entities.add({id:l.id,position:c.Cartesian3.fromDegrees(e[0],e[1],e[2]),ellipse:{semiMajorAxis:new c.CallbackProperty((function(e){return u+=1e3/l.duration*50,u>l.maxRadius&&(u=1),u}),!1),semiMinorAxis:new c.CallbackProperty((function(e){return u}),!1),material:new c.EllipsoidFadeMaterialProperty}});return d.id}}]),r}(l["a"]);t["a"]=h}}]);