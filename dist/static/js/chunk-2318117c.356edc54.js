(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2318117c"],{"29e1":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"cesiumContainer"}}),i("panel-view",{on:{draws:e.draws,clears:e.clears}}),i("video",{staticStyle:{display:"none"},attrs:{id:"trailer",muted:"",autoplay:"",loop:"",crossorigin:"",controls:""},domProps:{muted:!0}},[i("source",{attrs:{src:"/file/videos/tt.mp4",type:"video/mp4"}}),e._v(" Your browser does not support the "),i("code",[e._v("video")]),e._v(" element. ")])],1)},s=[],r=(i("e72f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"panel-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("操作面板")]),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clears}},[e._v("清除")])],1),i("div",{staticClass:"panel-content"},e._l(e.clickCreateFor,(function(t,n){return i("el-button",{key:n,attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.clickCreate(t.value)}}},[e._v(e._s(t.label))])})),1)])}),o=[],a={props:{option:{type:Object,default:function(){return{}}}},data:function(){return{clickCreateFor:[{label:"雨",value:"Rain"},{label:"雪",value:"Snow"},{label:"雾",value:"Fog"},{label:"雾（私有）",value:"private-Fog"},{label:"太阳（私有）",value:"private-Sun"},{label:"月亮（私有）",value:"private-Moon"},{label:"黑白",value:"colourless"},{label:"高斯模糊",value:"gaussianBlur"},{label:"亮度",value:"brightness"},{label:"景深",value:"depthOfField"},{label:"耀斑",value:"solarFlare"},{label:"夜视",value:"nightVision"},{label:"环境遮蔽",value:"ambientOcclusion"},{label:"阴影",value:"shadow"},{label:"天际线",value:"Skyline"},{label:"轮廓（描边）",value:"Stroke"},{label:"泛光",value:"Bloom"},{label:"视频",value:"video"},{label:"鹰眼地图",value:"EagleEyeMap"},{label:"网格",value:"grid"}]}},created:function(){},mounted:function(){},methods:{clickCreate:function(e){this.$emit("draws",e)},clears:function(){this.$emit("clears")}}},c=a,l=(i("cd0e"),i("cba8")),u=Object(l["a"])(c,r,o,!1,null,"b335f49c",null),v=u.exports,h=i("4bb1"),d=i("e143"),f=function(){function e(t,i){Object(h["a"])(this,e),this.Cesium=t,this.viewer=i,this.rainStage=void 0,this.rainMaterials="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nfloat hash(float x){\nreturn fract(sin(x*133.3)*13.13);\n}\nvoid main(void){\nfloat time = czm_frameNumber / 60.0;\nvec2 resolution = czm_viewport.zw;\n vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\nvec3 c=vec3(.6,.7,.8);\n float a=-.4;\n float si=sin(a),co=cos(a);\nuv*=mat2(co,-si,si,co);\nuv*=length(uv+vec2(0,4.9))*.3+1.;\n float v=1.-sin(hash(floor(uv.x*100.))*2.);\nfloat b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\nc*=v*b;\ngl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), 0.5);\n}\n"}return Object(d["a"])(e,[{key:"create",value:function(){var e=this.Cesium;return this.rainStage=this.viewer.scene.postProcessStages.add(new e.PostProcessStage({name:"czm_rain",fragmentShader:this.rainMaterials})),this.viewer.scene.skyAtmosphere.hueShift=-.5,this.viewer.scene.skyAtmosphere.saturationShift=-.7,this.viewer.scene.skyAtmosphere.brightnessShift=-.33,this.viewer.scene.fog.density=.001,this.viewer.scene.fog.minimumBrightness=.8,this.rainStage}},{key:"remove",value:function(){void 0!=this.rainStage&&(this.viewer.scene.postProcessStages.remove(this.rainStage),this.rainStage=void 0)}}]),e}(),m=f,g=function(){function e(t,i){Object(h["a"])(this,e),this.Cesium=t,this.viewer=i,this.snowStage=void 0,this.snowMaterials="\n        uniform sampler2D colorTexture; //输入的场景渲染照片\n          varying vec2 v_textureCoordinates;\n          \n          float snow(vec2 uv,float scale)\n          {\n              float time = czm_frameNumber / 60.0;\n              float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\n              uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\n              uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\n             p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\n             k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n             return k*w;\n         }\n         \n         void main(void){\n             vec2 resolution = czm_viewport.zw;\n             vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n             vec3 finalColor=vec3(0);\n             //float c=smoothstep(1.,0.3,clamp(uv.y*.3+.8,0.,.75));\n             float c = 0.0;\n             c+=snow(uv,30.)*.0;\n             c+=snow(uv,20.)*.0;\n             c+=snow(uv,15.)*.0;\n             c+=snow(uv,10.);\n             c+=snow(uv,8.);\n             c+=snow(uv,6.);\n             c+=snow(uv,5.);\n             finalColor=(vec3(c)); //屏幕上雪的颜色\n              gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.5);  //将雪和三维场景融合\n        }\n          "}return Object(d["a"])(e,[{key:"create",value:function(){var e=this.Cesium;return this.snowStage=this.viewer.scene.postProcessStages.add(new e.PostProcessStage({name:"czm_snow",fragmentShader:this.snowMaterials})),this.snowStage}},{key:"remove",value:function(){void 0!=this.snowStage&&(this.viewer.scene.postProcessStages.remove(this.snowStage),this.snowStage=void 0)}}]),e}(),p=g,w=function(){function e(t,i){Object(h["a"])(this,e),this.Cesium=t,this.viewer=i,this.fogStage=void 0,this.fogMaterials="  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  void main(void)\n  {\n      vec4 origcolor=texture2D(colorTexture, v_textureCoordinates);\n      vec4 fogcolor=vec4(0.8,0.8,0.8,0.5);\n\n      float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n      vec4 depthcolor=texture2D(depthTexture, v_textureCoordinates);\n\n      float f=(depthcolor.r-0.22)/0.8;\n      if(f<0.0) f=0.0;\n      else if(f>1.0) f=1.0;\n      gl_FragColor = mix(origcolor,fogcolor,f);\n   }"}return Object(d["a"])(e,[{key:"create",value:function(){var e=this.Cesium;return this.fogStage=this.viewer.scene.postProcessStages.add(new e.PostProcessStage({name:"czm_fog",fragmentShader:this.fogMaterials})),this.fogStage}},{key:"remove",value:function(){void 0!=this.fogStage&&(this.viewer.scene.postProcessStages.remove(this.fogStage),this.fogStage=void 0)}}]),e}(),S=w,y=function(){function e(t,i){Object(h["a"])(this,e),this.Cesium=t,this.viewer=i}return Object(d["a"])(e,[{key:"create",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,i=e.PostProcessStageLibrary.createEdgeDetectionStage(),n=new e.PostProcessStage({name:"czm_skylinetemp",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D depthTexture;varying vec2 v_textureCoordinates;void main(void){float depth = czm_readDepth(depthTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(depth<1.0 - 0.000001){gl_FragColor = color;}else{gl_FragColor = vec4(1.0,0.0,0.0,1.0);}}"}),s=new e.PostProcessStage({name:"czm_skylinetemp1",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D redTexture;uniform sampler2D silhouetteTexture;varying vec2 v_textureCoordinates;void main(void){vec4 redcolor=texture2D(redTexture, v_textureCoordinates);vec4 silhouetteColor = texture2D(silhouetteTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(redcolor.r == 1.0){gl_FragColor = mix(color, vec4(1.0,0.0,0.0,1.0), silhouetteColor.a);}else{gl_FragColor = color;}}",uniforms:{redTexture:n.name,silhouetteTexture:i.name}}),r=new e.PostProcessStageComposite({name:"czm_skyline",stages:[i,n,s],inputPreviousStageTexture:!1,uniforms:i.uniforms});t.add(r)}}]),e}(),b=y,_=function(){function e(t,i){Object(h["a"])(this,e),this.Cesium=t,this.viewer=i,this.scene=i.scene}return Object(d["a"])(e,[{key:"fog",value:function(){var e=this.scene;e.fog.enabled=!0,e.fog.density=.001,e.fog.minimumBrightness=.8}},{key:"sun",value:function(){var e=this.scene;e.sun.show=!0,e.sun.glowFactor=10}},{key:"moon",value:function(){var e=this.scene;e.moon.show=!0,e.moon.onlySunLighting=!0}},{key:"skyBox",value:function(){var e=this.scene;e.skyBox.show=!0}},{key:"skyAtmosphere",value:function(){var e=this.scene;e.skyAtmosphere.show=!0,e.skyAtmosphere.hueShift=-1,e.skyAtmosphere.saturationShift=-1,e.skyAtmosphere.brightnessShift=-1}},{key:"colourless",value:function(){var e=this.Cesium,t=this.scene.postProcessStages,i=t.add(e.PostProcessStageLibrary.createBlackAndWhiteStage());i.enabled=!0,i.uniforms.gradations=15}},{key:"gaussianBlur",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,i=t.add(e.PostProcessStageLibrary.createBlurStage());i.enabled=!0,i.uniforms.delta=1,i.uniforms.sigma=1,i.uniforms.stepSize=20}},{key:"brightness",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,i=t.add(e.PostProcessStageLibrary.createBrightnessStage());i.enabled=!0,i.uniforms.brightness=.1}},{key:"depthOfField",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,i=t.add(e.PostProcessStageLibrary.createDepthOfFieldStage());i.enabled=!0,i.uniforms.focalDistance=1,i.uniforms.delta=1,i.uniforms.sigma=1,i.uniforms.stepSize=1}},{key:"solarFlare",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages.add(e.PostProcessStageLibrary.createLensFlareStage());function i(){t.enabled=5,t.uniforms.intensity=5,t.uniforms.distortion=5,t.uniforms.ghostDispersal=5,t.uniforms.haloWidth=5,t.uniforms.dirtAmount=5,t.uniforms.earthRadius=5}i();var n=this.viewer.scene.camera;n.position=new e.Cartesian3(40010447.97500168,56238683.46406788,20776576.752223067),n.direction=new e.Cartesian3(-.5549701431494752,-.7801872010801355,-.2886452346452218),n.up=new e.Cartesian3(-.3016252360948521,-.13464820558887716,.9438707950150912),n.right=e.Cartesian3.cross(n.direction,n.up,new e.Cartesian3),this.viewer.clock.currentTime=new e.JulianDate(2458047,27399.860215000022)}},{key:"nightVision",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,i=t.add(e.PostProcessStageLibrary.createNightVisionStage());i.enabled=!0}},{key:"ambientOcclusion",value:function(){var e=this.Cesium,t=e.PostProcessStageLibrary.createAmbientOcclusionStage();t.enabled=!0,t.uniforms.intensity=5,t.uniforms.bias=15,t.uniforms.lengthCap=5,t.uniforms.stepSize=5,t.uniforms.frustumLength=5}},{key:"shadow",value:function(){var e=this.Cesium;this.viewer.scene.shadowMap=new e.ShadowMap({lightCamera:this.viewer.camera,context:this.viewer.scene.context}),this.viewer.scene.shadowMap.enabled=!0}},{key:"Stroke",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,i=t.add(e.PostProcessStageLibrary.createSilhouetteStage());i.enabled=!0,i.uniforms.color=e.Color.YELLOW}},{key:"Bloom",value:function(){var e=this.viewer.scene.postProcessStages.bloom;e.enabled=!0,e.uniforms.glowOnly=!1,e.uniforms.contrast=128,e.uniforms.brightness=-.3,e.uniforms.delta=1,e.uniforms.sigma=2,e.uniforms.stepSize=1}}]),e}(),x=_,C=i("9e48"),k={components:{panelView:v},data:function(){return{viewer:null,handler:null,_Rain:null,_Snow:null,_Fog:null,_Skyline:null,_Scene:null,_Entity:null}},mounted:function(){this.init()},methods:{init:function(){var e=this.cesium;e.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNTIzZTZiYi05OWQxLTQ0OTUtYTUzNC1mYjYxNWI4OTZiZTYiLCJpZCI6OTA3MDUsImlhdCI6MTY1MDUzNDAzMn0.0f1DG8NlExZnbrueMn_AgO6GX_g_RASavpxAWcVymPs",this.viewer=new e.Viewer("cesiumContainer",{animation:!1,timeline:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this._Rain=new m(e,this.viewer),this._Snow=new p(e,this.viewer),this._Fog=new S(e,this.viewer),this._Skyline=new b(e,this.viewer),this._Scene=new x(e,this.viewer),this._Entity=new C["a"](e,this.viewer)},clears:function(){var e=this.cesium;this.handler&&(this.handler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOWN),this.handler.removeInputAction(e.ScreenSpaceEventType.MOUSE_MOVE),this.handler.removeInputAction(e.ScreenSpaceEventType.LEFT_UP),this.handler.destroy(),this.handler=null),this.viewer.entities.removeAll(),this.viewer.scene.postProcessStages.removeAll()},draws:function(e){var t=this,i=this.cesium,n=this.viewer;if(this.handler=new i.ScreenSpaceEventHandler(n.scene.canvas),"Rain"!=e)if("Snow"!=e)if("Fog"!=e)if("private-Fog"!=e)if("private-Sun"!=e)if("private-Moon"!=e)if("colourless"!=e)if("gaussianBlur"!=e)if("brightness"!=e)if("depthOfField"!=e)if("solarFlare"!=e)if("nightVision"!=e)if("ambientOcclusion"!=e)if("shadow"!=e)if("Skyline"!=e)if("Stroke"!=e)if("Bloom"!=e)if("video"!=e){if("EagleEyeMap"==e){var s=document.getElementsByClassName("container"),r=window.document.createElement("div");r.id="eye",r.style="position: absolute;\n                      width: 20%;\n                      height: 20%;\n                      bottom: 0;\n                      left: 0;\n                      z-index: 999;\n                      background: red;\n                      border: solid blue 1px;",r.innerHTML='<img id=\'eyeImage\' style="width: 100%;height: 100%;" src="" alt="">',s[0].appendChild(r);var o=function e(){document.getElementById("eyeImage").src=t.viewer.scene.canvas.toDataURL("image/png"),t.viewer.scene.postRender.removeEventListener(e)};return this.viewer.camera.changed.addEventListener((function(){t.viewer.scene.postRender.addEventListener(o)})),void(window.onload=function(){t.viewer.scene.postRender.addEventListener(o)})}if("grid"==e){var a=this.viewer.imageryLayers,c=a.addImageryProvider(new i.GridImageryProvider);return c.alpha=i.defaultValue(alpha,.5),c.show=i.defaultValue(show,!0),void(c.name="Grid")}}else{var l=document.getElementById("trailer");l.play();var u=this._Entity.createRectangle({coordinates:i.Rectangle.fromDegrees(-180,-90,180,90),material:l});this.viewer.trackedEntity=u}else this._Scene.Bloom();else this._Scene.Stroke();else this._Skyline.create();else this._Scene.shadow();else this._Scene.ambientOcclusion();else this._Scene.nightVision();else this._Scene.solarFlare();else this._Scene.depthOfField();else this._Scene.brightness();else this._Scene.gaussianBlur();else this._Scene.colourless();else this._Scene.moon();else this._Scene.sun();else this._Scene.fog();else this._Fog.create();else this._Snow.create();else this._Rain.create()}}},P=k,T=(i("6e21"),Object(l["a"])(P,n,s,!1,null,"4cce30db",null));t["default"]=T.exports},"4bb1":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("a567");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"6e21":function(e,t,i){"use strict";i("d66b")},"72cd":function(e,t,i){},"78be":function(e,t,i){var n=i("46a7"),s=i("bc35"),r=i("5386");n({target:"Array",proto:!0},{fill:s}),r("fill")},bc35:function(e,t,i){"use strict";var n=i("735b"),s=i("32da"),r=i("1c60");e.exports=function(e){var t=n(this),i=r(t),o=arguments.length,a=s(o>1?arguments[1]:void 0,i),c=o>2?arguments[2]:void 0,l=void 0===c?i:s(c,i);while(l>a)t[a++]=e;return t}},cd0e:function(e,t,i){"use strict";i("72cd")},d66b:function(e,t,i){},e143:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}i.d(t,"a",(function(){return s}))}}]);