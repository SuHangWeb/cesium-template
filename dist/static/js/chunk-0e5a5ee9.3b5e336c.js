(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e5a5ee9"],{"19bc":function(e,r,t){var i=t("46a7"),a=t("d2b9"),n=t("e136").f,o=a((function(){return!Object.getOwnPropertyNames(1)}));i({target:"Object",stat:!0,forced:o},{getOwnPropertyNames:n})},2237:function(e,r,t){"use strict";var i=t("46a7"),a=t("4162"),n=t("d2cf"),o=t("4488"),s=t("7f99"),c=t("d2b9"),l=RangeError,u=String,f=Math.floor,d=a(s),g=a("".slice),h=a(1..toFixed),v=function(e,r,t){return 0===r?t:r%2===1?v(e,r-1,t*e):v(e*e,r/2,t)},m=function(e){var r=0,t=e;while(t>=4096)r+=12,t/=4096;while(t>=2)r+=1,t/=2;return r},b=function(e,r,t){var i=-1,a=t;while(++i<6)a+=r*e[i],e[i]=a%1e7,a=f(a/1e7)},C=function(e,r){var t=6,i=0;while(--t>=0)i+=e[t],e[t]=f(i/r),i=i%r*1e7},p=function(e){var r=6,t="";while(--r>=0)if(""!==t||0===r||0!==e[r]){var i=u(e[r]);t=""===t?i:t+d("0",7-i.length)+i}return t},w=c((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!c((function(){h({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(e){var r,t,i,a,s=o(this),c=n(e),f=[0,0,0,0,0,0],h="",w="0";if(c<0||c>20)throw l("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return u(s);if(s<0&&(h="-",s=-s),s>1e-21)if(r=m(s*v(2,69,1))-69,t=r<0?s*v(2,-r,1):s/v(2,r,1),t*=4503599627370496,r=52-r,r>0){b(f,0,t),i=c;while(i>=7)b(f,1e7,0),i-=7;b(f,v(10,i,1),0),i=r-1;while(i>=23)C(f,1<<23),i-=23;C(f,1<<i),b(f,1,1),C(f,2),w=p(f)}else b(f,0,t),b(f,1<<-r,0),w=p(f)+d("0",c);return c>0?(a=w.length,w=h+(a<=c?"0."+d("0",c-a)+w:g(w,0,a-c)+"."+g(w,a-c))):w=h+w,w}})},4488:function(e,r,t){var i=t("4162");e.exports=i(1..valueOf)},"4bb1":function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));t("a567");function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}},"68de2":function(e,r,t){"use strict";var i=t("4eba"),a=t("4bb1"),n=t("e143"),o=(t("f8c7"),t("5e94"),t("5f01"),t("150a"),t("eb3b"),t("b1f6"),t("19bc"),t("2237"),t("e9d3")),s=function(){function e(r,t){Object(a["a"])(this,e),this.Cesium=r,this.viewer=t}return Object(n["a"])(e,[{key:"setLayer",value:function(e){var r=this.Cesium,t=this.viewer.imageryLayers;function i(){return new r[e.type](e.classConfig)}t.addImageryProvider(i(e));var a=new o["a"],n=a.colorRgb(e.filterRGB);t.filterRGB=n,t.invertColor=e.invertswitch;var s=e.offset.split(",");if(2===s.length)try{var c=[parseFloat(s[0]),parseFloat(s[1])];setTimeout((function(){var e=t.imageryProvider;if(!e)return!1;var r=e.tilingScheme._rectangleNortheastInMeters;r.x+=c[0],r.y+=c[1]}),2e3)}catch(l){console.log(l)}this.changeImageryProviderColors(t),this.isShowImagery(e.isShow,t)}},{key:"changeImageryProviderColors",value:function(e){for(var r=this.viewer.scene.globe._surfaceShaderSet.baseFragmentShaderSource.sources,t=0;t<r.length;t++){var i=r[t],a="color = czm_saturation(color, textureSaturation);\n#endif\n",n="color = czm_saturation(color, textureSaturation);\n#endif\n";e.invertColor&&(n+="\n                        color.r = 1.0 - color.r;\n                        color.g = 1.0 - color.g;\n                        color.b = 1.0 - color.b;\n                        ",n+="\n                        color.r = color.r * ".concat(e.filterRGB[0],".0/255.0;\n                        color.g = color.g * ").concat(e.filterRGB[1],".0/255.0;\n                        color.b = color.b * ").concat(e.filterRGB[2],".0/255.0;\n                        ")),-1!==i.indexOf(a)&&(r[t]=r[t].replace(a,n))}}},{key:"isShowImagery",value:function(e,r){r.show=e}},{key:"createWhiteMold",value:function(e){var r,t=this.Cesium;return this.viewer.scene.primitives.add(new t.Cesium3DTileset((r={url:e,show:!0,shadows:4,maximumScreenSpaceError:1,maximumNumberOfLoadedTiles:1e3,skipLevelOfDetail:!0,baseScreenSpaceError:1024},Object(i["a"])(r,"maximumScreenSpaceError",256),Object(i["a"])(r,"skipScreenSpaceErrorFactor",16),Object(i["a"])(r,"skipLevels",1),Object(i["a"])(r,"immediatelyLoadDesiredLevelOfDetail",!1),Object(i["a"])(r,"loadSiblings",!0),Object(i["a"])(r,"cullWithChildrenBounds",!0),Object(i["a"])(r,"cullRequestsWhileMoving",!0),Object(i["a"])(r,"cullRequestsWhileMovingMultiplier",10),Object(i["a"])(r,"preloadWhenHidden",!0),Object(i["a"])(r,"preferLeaves",!0),Object(i["a"])(r,"maximumMemoryUsage",128),Object(i["a"])(r,"progressiveResolutionHeightFraction",.5),Object(i["a"])(r,"dynamicScreenSpaceErrorDensity",.1),Object(i["a"])(r,"dynamicScreenSpaceErrorFactor",1),Object(i["a"])(r,"dynamicScreenSpaceError",!0),Object(i["a"])(r,"backFaceCulling",!1),r)))}},{key:"Cesium3DTileStyle",value:function(e,r){var t=this.Cesium;e.style=new t.Cesium3DTileStyle({color:{conditions:[["true","color('".concat(r,"')")]],meta:{description:""}}})}},{key:"update3dtilesMaxtrix",value:function(e,r){var t=this.Cesium;if(e.ready){var i=t.Cartographic.fromCartesian(e.boundingSphere.center),a=t.Cartesian3.fromRadians(i.longitude,i.latitude,i.height),n=t.Cartesian3.fromRadians(i.longitude+t.Math.toRadians(r.offset_x),i.latitude+t.Math.toRadians(r.offset_y),i.height+r.offset_z),o=t.Cartesian3.subtract(n,a,new t.Cartesian3);e.modelMatrix=t.Matrix4.fromTranslation(o)}}},{key:"makeEffect",value:function(e,r){var t=[],i=new o["a"];e.tileVisible.addEventListener((function(e){for(var a=e.content,n=a.featuresLength,o=i.colorRgb1(r.effect_color),s=function(e){var i=a.getFeature(e).content._model;i&&i._sourcePrograms&&i._rendererResources&&(Object.getOwnPropertyNames(i._sourcePrograms).forEach((function(e){var a=i._sourcePrograms[e];t[0]||(t[0]=i._rendererResources.sourceShaders[a.fragmentShader]),1!==r.effectswitch?i._rendererResources.sourceShaders[a.fragmentShader]=t[0]:i._rendererResources.sourceShaders[a.fragmentShader]="\n                                        varying vec3 v_positionEC;\n                                        void main(void){\n                                            vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n                                            float glowRange = ".concat(r.height.toFixed(2),"; // 光环的移动范围(高度)\n                                            gl_FragColor = vec4(").concat(o[0],", ").concat(o[1],", ").concat(o[2],", 1.0); // 颜色\n                                            // 底楼 亮度太暗了，那么把20%以内的底楼，都不再变暗\n                                            if((position.z / 100.0) < 0.2) {\n                                            gl_FragColor *= vec4(vec3(position.z / 100.0 * 2.0), 1.0);\n                                            }else{\n                                            gl_FragColor *= vec4(vec3(position.z / 100.0), 1.0); // 渐变\n                                            }\n                                            // 动态光环\n                                            float time = fract(czm_frameNumber / 360.0);\n                                            time = abs(time - 0.5) * 2.0;\n                                            float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));\n                                            gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n                                        }\n                                        ")})),i._shouldRegenerateShaders=1===r.effectswitch||!1)},c=0;c<n;c+=2)s(c)}))}},{key:"otherSettings",value:function(e){var r=this.Cesium;if(this.viewer._cesiumWidget._creditContainer.style.display="none",this.viewer.scene.backgroundColor=r.Color.TRANSPARENT,this.viewer.scene.globe.baseColor=r.defined(e)&&e.globeBaseColor&&r.defined(e.globeBaseColor.r)&&r.defined(e.globeBaseColor.g)&&r.defined(e.globeBaseColor.b)&&r.defined(e.globeBaseColor.a)?new r.Color(e.globeBaseColor.r/255,e.globeBaseColor.g/255,e.globeBaseColor.b/255,e.globeBaseColor.a):new r.Color(9/255,25/255,.2,1),this.viewer.scene.undergroundMode=(!r.defined(e)||void 0!==e.undergroundMode)&&e.undergroundMode,this.viewer.scene.screenSpaceCameraController._zoomFactor=r.defined(e)&&void 0===e._zoomFactor?5:e._zoomFactor,this.viewer.scene.globe.depthTestAgainstTerrain=!0,this.viewer.scene.globe.show=!(!r.defined(e)||void 0!==e.isGlobe)||e.isGlobe,r.FeatureDetection.supportsImageRenderingPixelated()){var t=window.devicePixelRatio;while(t>=2)t/=2;this.viewer.resolutionScale=t}if(this.viewer.scene.fxaa=!0,this.viewer.scene.postProcessStages.fxaa.enabled=!0,this.viewer._cesiumWidget._supportsImageRenderingPixelated=r.FeatureDetection.supportsImageRenderingPixelated(),this.viewer._cesiumWidget._forceResize=!0,r.FeatureDetection.supportsImageRenderingPixelated()){t=window.devicePixelRatio;while(t>=2)t/=2;this.viewer.resolutionScale=t}}}]),e}();r["a"]=s},e143:function(e,r,t){"use strict";function i(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}t.d(r,"a",(function(){return a}))},e9d3:function(e,r,t){"use strict";var i=t("4bb1"),a=t("e143"),n=(t("7502"),t("2237"),t("eb3b"),t("a567"),t("f8c7"),t("e226"),t("5f01"),t("5f07"),t("b1f6"),t("5e94"),t("62db"),function(){function e(r,t){Object(i["a"])(this,e),this.Cesium=r,this.viewer=t}return Object(a["a"])(e,[{key:"formCssColorString",value:function(e){var r=this.Cesium;return r.Color.fromCssColorString(e)}},{key:"getPosition",value:function(e){var r=this.Cesium,t=this.viewer,i=t.scene.camera.pickEllipsoid(e.position),a=r.Cartographic.fromCartesian(i),n=r.Math.toDegrees(a.longitude),o=r.Math.toDegrees(a.latitude),s=Number(t.camera.positionCartographic.height.toFixed(0));return{longitude:n,latitude:o,cameraHeight:s}}},{key:"terrainProviderHeight",value:function(e){var r=this.Cesium,t=r.createWorldTerrain(),i=r.sampleTerrainMostDetailed(t,e);return Promise.resolve(i)}},{key:"getSeibelCurve",value:function(e,r,t,i){var a=this.Cesium,n=[],o=a.Cartographic.fromCartesian(e),s=a.Cartographic.fromCartesian(r),c=180*o.longitude/Math.PI,l=180*o.latitude/Math.PI,u=180*s.longitude/Math.PI,f=180*s.latitude/Math.PI,d=Math.sqrt((c-u)*(c-u)+(l-f)*(l-f)),g=d*t,h=a.Cartesian3.clone(e),v=a.Cartesian3.clone(r),m=a.Cartesian3.distance(h,a.Cartesian3.ZERO),b=a.Cartesian3.distance(v,a.Cartesian3.ZERO);if(a.Cartesian3.normalize(h,h),a.Cartesian3.normalize(v,v),0===a.Cartesian3.distance(h,v))return n;var C=a.Cartesian3.angleBetween(h,v);n.push(e);for(var p=1;p<i-1;p++){var w=1*p/(i-1),y=1-w,S=Math.sin(y*C)/Math.sin(C),R=Math.sin(w*C)/Math.sin(C),O=a.Cartesian3.multiplyByScalar(h,S,new a.Cartesian3),x=a.Cartesian3.multiplyByScalar(v,R,new a.Cartesian3),k=a.Cartesian3.add(O,x,new a.Cartesian3),M=w*Math.PI,_=m*y+b*w+Math.sin(M)*g,P=a.Cartesian3.multiplyByScalar(k,_,k);n.push(P)}return n.push(r),n}},{key:"getCatesian3FromPX",value:function(e){var r=this.viewer.camera.getPickRay(e);return r?this.viewer.scene.globe.pick(r,this.viewer.scene):null}},{key:"meter2Lat",value:function(e){var r=Math.PI,t=12742*r/360;return e/t/1e3}},{key:"meter2Lng",value:function(e,r){var t=Math.PI,i=6371*Math.cos(r*t/180)*2*t/360;return e/i/1e3}},{key:"isDegreesOrCartesian",value:function(e){if(!e)throw new Error("Error in Parameter!");return"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.z||"number"===typeof e.lng&&"number"===typeof e.lat}},{key:"toDegrees",value:function(e){var r=this.Cesium;if(this.isDegreesOrCartesian(e)){var t=function(e){var t=new r.Cartesian3(e.x,e.y,e.z),i=r.Cartographic.fromCartesian(t);return{lng:parseFloat(r.Math.toDegrees(i.longitude).toFixed(8)),lat:parseFloat(r.Math.toDegrees(i.latitude).toFixed(8)),alt:parseFloat(i.height.toFixed(8))}};return e.x&&(e=t(e)),e}}},{key:"toCartesian",value:function(e){var r=this.Cesium;if(this.isDegreesOrCartesian(e)){var t=function(e){return r.Cartesian3.fromDegrees(e.lng,e.lat,e.alt||0)};return e.lng&&(e=t(e)),e}}},{key:"toWindowCoordinates",value:function(e){var r=this.Cesium,t=this.viewer;if(t&&e&&e.x&&e.y&&e.z)return r.SceneTransforms.wgs84ToWindowCoordinates(t.scene,e);if(t&&e.lng&&e.lat&&e.alt)return r.SceneTransforms.wgs84ToWindowCoordinates(t.scene,toCartesianFromDegrees(e));throw new Error("Error in Parameter!")}},{key:"colorRgb",value:function(e){var r=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,t=e.toLowerCase();if(r.test(t)){if(4===t.length){for(var i="#",a=1;a<4;a+=1)i+=t.slice(a,a+1).concat(t.slice(a,a+1));t=i}for(var n=[],o=1;o<7;o+=2)n.push(parseInt("0x"+t.slice(o,o+2)));return n}return[]}},{key:"colorRgbString",value:function(e){var r=this.colorRgb(e);return"rgb("+r[0]+","+r[1]+","+r[2]+")"}},{key:"colorRgb1",value:function(e){var r=this.colorRgb(e);return r.forEach((function(e,t){r[t]=(e/255).toFixed(2)})),r}},{key:"colorRGB2Hex",value:function(e){var r=e.split(",");if(r.length<=1)return e;var t=parseInt(r[0].split("(")[1]),i=parseInt(r[1]),a=parseInt(r[2].split(")")[0]),n="#"+((1<<24)+(t<<16)+(i<<8)+a).toString(16).slice(1);return n}}]),e}());r["a"]=n}}]);